<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.comic.mapper.LikeMapper">
    <insert id="insert" parameterType="com.comic.entity.Like" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO t_like (user_id, target_type, target_id)
        VALUES (#{userId}, #{targetType}, #{targetId})
    </insert>

    <delete id="deleteByUserAndTarget">
        DELETE FROM t_like
        WHERE user_id = #{userId}
          AND target_type = #{targetType}
          AND target_id = #{targetId}
    </delete>

    <select id="checkLike" resultType="java.lang.Integer">
        SELECT COUNT(1) FROM t_like
        WHERE user_id = #{userId}
          AND target_type = #{targetType}
          AND target_id = #{targetId}
    </select>
</mapper>